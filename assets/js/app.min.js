function encodeAjaxPostData(a){return a=replaceAll("=","~",a),a=replaceAll("&","^",a)}function replaceAll(a,t,e){return e.replace(new RegExp(a,"g"),t)}$(document).ready(function(){$.ajaxSetup({cache:!1}),moment.locale(AppLanugage.locale),jQuery.fn.datepicker.dates.custom={days:AppLanugage.days,daysShort:AppLanugage.daysShort,daysMin:AppLanugage.daysMin,months:AppLanugage.months,monthsShort:AppLanugage.monthsShort,today:AppLanugage.today},$("body").on("click","[data-act=ajax-modal]",function(){var a={ajaxModal:1},t=$(this).attr("data-action-url"),e=$(this).attr("data-modal-lg"),n=$(this).attr("data-title");return t?(n?$("#ajaxModalTitle").html(n):$("#ajaxModalTitle").html($("#ajaxModalTitle").attr("data-title")),$("#ajaxModalContent").html($("#ajaxModalOriginalContent").html()),$("#ajaxModalContent").find(".original-modal-body").removeClass("original-modal-body").addClass("modal-body"),$("#ajaxModal").modal("show"),$(this).each(function(){$.each(this.attributes,function(){if(this.specified&&this.name.match("^data-post-")){var t=this.name.replace("data-post-","");a[t]=this.value}})}),ajaxModalXhr=$.ajax({url:t,data:a,cache:!1,type:"POST",success:function(a){$("#ajaxModal").find(".modal-dialog").removeClass("mini-modal"),"1"===e&&$("#ajaxModal").find(".modal-dialog").addClass("modal-lg"),$("#ajaxModalContent").html(a);var t=$("#ajaxModalContent").find(".modal-body"),n=t.height(),o=$(window).height()-200;n>o&&(n=o,$.fn.mCustomScrollbar&&t.mCustomScrollbar({setHeight:n,theme:"minimal-dark",autoExpandScrollbar:!0}))},statusCode:{404:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}}),!1):(console.log("Ajax Modal: Set data-action-url!"),!1)}),$("#ajaxModal").on("hidden.bs.modal",function(a){ajaxModalXhr.abort(),$("#ajaxModal").find(".modal-dialog").removeClass("modal-lg"),$("#ajaxModal").find(".modal-dialog").addClass("mini-modal"),$("#ajaxModalContent").html("")}),$("body").on("click","[data-act=ajax-request]",function(){var a={},t=$(this),e=t.attr("data-action-url"),n=t.attr("data-remove-on-success"),o=t.attr("data-remove-on-click"),r=t.attr("data-fade-out-on-success"),i=t.attr("data-fade-out-on-click"),s=t.attr("data-inline-loader"),l=t.attr("data-reload-on-success"),d="";if(t.attr("data-real-target")?d=$(t.attr("data-real-target")):t.attr("data-closest-target")&&(d=t.closest(t.attr("data-closest-target"))),!e)return console.log("Ajax Request: Set data-action-url!"),!1;o&&$(o).length&&$(o).remove(),i&&$(i).length&&$(i).fadeOut(function(){$(this).remove()}),t.each(function(){$.each(this.attributes,function(){if(this.specified&&this.name.match("^data-post-")){var t=this.name.replace("data-post-","");a[t]=this.value}})}),"1"===s?t.addClass("inline-loader"):appLoader.show(),ajaxRequestXhr=$.ajax({url:e,data:a,cache:!1,type:"POST",success:function(a){l&&location.reload(),n&&$(n).length&&$(n).remove(),r&&$(r).length&&$(r).fadeOut(function(){$(this).remove()}),appLoader.hide(),d.length&&d.html(a)},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.")}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.")}})}),$("body").on("click",'[data-toggle="ajax-tab"] a',function(){var a=$(this),t=a.attr("href"),e=a.attr("data-target");return!!e&&(""===$(e).html()&&(appLoader.show({container:e,css:"right:50%; bottom:auto;"}),$.get(t,function(a){$(e).html(a)})),a.tab("show"),!1)}),$('[data-toggle="ajax-tab"] a').first().trigger("click"),$("body").on("click",'[data-toggle="app-modal"]',function(){var a=!0;return"0"===$(this).attr("data-sidebar")&&(a=!1),appContentModal.init({url:$(this).attr("data-url"),sidebar:a}),!1})}),function(a){a.fn.appForm=function(t){function e(t,e){a.validator.addMethod("greaterThanOrEqual",function(t,e,n){var o=n;return!n||0!==n.indexOf("#")&&0!==n.indexOf(".")||(o=a(n).val()),/Invalid|NaN/.test(new Date(t))?isNaN(t)&&isNaN(o)||Number(t)>=Number(o):new Date(t)>=new Date(o)},"Must be greater than {0}."),a(t).validate({submitHandler:function(a){if(!e)return!0;e(a)},highlight:function(t){a(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){a(t).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",ignore:":hidden:not(.validate-hidden)",errorPlacement:function(a,t){t.parent(".input-group").length?a.insertAfter(t.parent()):a.insertAfter(t)}}),a(".validate-hidden").click(function(){a(this).closest(".form-group").removeClass("has-error").find(".help-block").hide()})}function n(t){var e=t.height()-80;e>0&&(e=Math.floor(e/2)),t.append("<div class='modal-mask'><div class='circle-loader'></div></div>");var n=t.outerHeight();a(".modal-mask").css({width:t.width()+30+"px",height:n+"px","padding-top":e+"px"}),t.closest(".modal-dialog").find('[type="submit"]').attr("disabled","disabled")}function o(){a(".modal-body").closest(".modal-dialog").find('[type="submit"]').removeAttr("disabled"),a(".modal-mask").remove()}function r(t){t&&(a(".modal-mask").html("<div class='circle-done'><i class='fa fa-check'></i></div>"),setTimeout(function(){a(".modal-mask").find(".circle-done").addClass("ok")},30)),setTimeout(function(){a(".modal-mask").remove(),a("#ajaxModal").modal("toggle"),s.onModalClose()},1e3)}var i={ajaxSubmit:!0,isModal:!0,dataType:"json",onModalClose:function(){},onSuccess:function(){},onError:function(){return!0},onSubmit:function(){},onAjaxSuccess:function(){},beforeAjaxSubmit:function(a,t,e){}},s=a.extend({},i,t);this.each(function(){s.ajaxSubmit?e(a(this),function(t){s.onSubmit(),s.isModal&&n(a("#ajaxModalContent").find(".modal-body")),a(t).ajaxSubmit({dataType:s.dataType,beforeSubmit:function(a,t,e){s.beforeAjaxSubmit(a,t,e)},success:function(a){s.onAjaxSuccess(a),a.success?(s.onSuccess(a),s.isModal&&r(!0)):s.onError(a)&&(s.isModal?(o(),a.message&&appAlert.error(a.message,{container:".modal-body",animate:!1})):a.message&&appAlert.error(a.message))}})}):e(a(this))})}}(jQuery);var getWeekRange=function(a){a||(a=moment().format("YYYY-MM-DD"));var t=moment(a).format("E")-AppHelper.settings.firstDayOfWeek,e={};return e.firstDateOfWeek=t<7?moment(a).subtract(t,"days").format("YYYY-MM-DD"):moment(a).format("YYYY-MM-DD"),t<0&&(e.firstDateOfWeek=moment(e.firstDateOfWeek).subtract(7,"days").format("YYYY-MM-DD")),e.lastDateOfWeek=moment(e.firstDateOfWeek).add(6,"days").format("YYYY-MM-DD"),e},prepareDefaultFilters=function(a){return a=function(a){if("daily"===a.dateRangeType)a.filterParams.start_date=moment().format(a._inputDateFormat),a.filterParams.end_date=a.filterParams.start_date;else if("monthly"===a.dateRangeType){var t=moment().daysInMonth(),e=moment().format("YYYY-MM");a.filterParams.start_date=e+"-01",a.filterParams.end_date=e+"-"+t}else if("yearly"===a.dateRangeType){var n=moment().format("YYYY");a.filterParams.start_date=n+"-01-01",a.filterParams.end_date=n+"-12-31"}else if("weekly"===a.dateRangeType){var o=getWeekRange();a.filterParams.start_date=o.firstDateOfWeek,a.filterParams.end_date=o.lastDateOfWeek}return a}(a),a=function(a){var t=[],e="";return $.each(a.checkBoxes,function(a,n){e=n.name,n.isChecked&&t.push(n.value)}),a.filterParams[e]=t,a}(a),a=function(a){return $.each(a.multiSelect,function(t,e){var n=[];$.each(e.options,function(a,t){t.isChecked&&n.push(t.value)}),a.filterParams[e.name]=n}),a}(a),a=function(a){return $.each(a.radioButtons,function(t,e){e.isChecked&&(a.filterParams[e.name]=e.value)}),a}(a),a=function(a){return $.each(a.filterDropdown||[],function(t,e){$.each(e.options,function(t,n){n.isSelected&&(a.filterParams[e.name]=n.id)})}),a}(a),a=function(a){return $.each(a.singleDatepicker||[],function(t,e){$.each(e.options||[],function(t,n){n.isSelected&&(a.filterParams[e.name]=n.value)})}),a}(a),a=function(a){return $.each(a.rangeDatepicker||[],function(t,e){e.startDate&&e.startDate.value&&(a.filterParams[e.startDate.name]=e.startDate.value),e.startDate&&e.endDate.value&&(a.filterParams[e.endDate.name]=e.endDate.value)}),a}(a)},buildFilterDom=function(a,t,e){var n=function(a,t){a.is("table")?a.appTable({reload:!0,filterParams:t.filterParams}):a.appFilters({reload:!0,filterParams:t.filterParams})};if(a.search&&!1!==a.search.show){var o='<div class="DTTT_container"><input type="search" class="custom-filter-search" name="'+a.search.name+'" placeholder="'+a.customLanguage.searchPlaceholder+'"></div>';t.find(".custom-toolbar").append(o);var r;t.find(".custom-filter-search").keyup(function(){appLoader.show();var t=$(this);clearTimeout(r),r=setTimeout(function(){a.filterParams[a.search.name]=t.val(),n(e,a)},700)})}if(a.reloadSelector&&$(a.reloadSelector).length&&$(a.reloadSelector).click(function(){appLoader.show(),n(e,a)}),a.dateRangeType){t.find(".custom-toolbar").append('<div class="mr15 DTTT_container"><button data-act="prev" class="btn btn-default date-range-selector"><i class="fa fa-chevron-left"></i></button><button data-act="datepicker" class="btn btn-default" style="margin: -1px"></button><button data-act="next"  class="btn btn-default date-range-selector"><i class="fa fa-chevron-right"></i></button></div>');var i=t.find("[data-act='datepicker']"),s=t.find(".date-range-selector");if("daily"===a.dateRangeType){var l=function(t){a.filterParams.start_date===moment().format(a._inputDateFormat)?t.html(a.customLanguage.today):a.filterParams.start_date===moment().subtract(1,"days").format(a._inputDateFormat)?t.html(a.customLanguage.yesterday):a.filterParams.start_date===moment().add(1,"days").format(a._inputDateFormat)?t.html(a.customLanguage.tomorrow):t.html(moment(a.filterParams.start_date).format("Do, MMMM YYYY"))};l(i),i.datepicker({format:a._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom"}).on("changeDate",function(t){var o=moment(t.date).format(a._inputDateFormat);a.filterParams.start_date=o,a.filterParams.end_date=o,l(i),n(e,a)}),s.click(function(){var t=$(this).attr("data-act"),o="";"next"===t?o=moment(a.filterParams.start_date).add(1,"days").format(a._inputDateFormat):"prev"===t&&(o=moment(a.filterParams.start_date).subtract(1,"days").format(a._inputDateFormat)),a.filterParams.start_date=o,a.filterParams.end_date=o,l(i),n(e,a)})}if("monthly"===a.dateRangeType){var d=function(t){t.html(moment(a.filterParams.start_date).format("MMMM YYYY"))};d(i),i.datepicker({format:"YYYY-MM",viewMode:"months",minViewMode:"months",autoclose:!0,language:"custom"}).on("changeDate",function(t){var o=moment(t.date).format(a._inputDateFormat),r=moment(o).daysInMonth(),s=moment(o).format("YYYY-MM");a.filterParams.start_date=s+"-01",a.filterParams.end_date=s+"-"+r,d(i),n(e,a)}),s.click(function(){var t=$(this).attr("data-act"),o=moment(a.filterParams.start_date),r=moment(a.filterParams.end_date);if("next"===t){var s=o.add(1,"months"),l=s.daysInMonth();o=(u=s.format("YYYY-MM"))+"-01",r=u+"-"+l}else if("prev"===t){var c=o.subtract(1,"months"),l=c.daysInMonth(),u=c.format("YYYY-MM");o=u+"-01",r=u+"-"+l}a.filterParams.start_date=o,a.filterParams.end_date=r,d(i),n(e,a)})}if("yearly"===a.dateRangeType){var c=function(t){t.html(moment(a.filterParams.start_date).format("YYYY"))};c(i),i.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom"}).on("changeDate",function(t){var o=moment(t.date).format(a._inputDateFormat),r=moment(o).format("YYYY");a.filterParams.start_date=r+"-01-01",a.filterParams.end_date=r+"-12-31",c(i),n(e,a)}),s.click(function(){var t=$(this).attr("data-act"),o=moment(a.filterParams.start_date),r=moment(a.filterParams.end_date);"next"===t?(o=o.add(1,"years").format(a._inputDateFormat),r=r.add(1,"years").format(a._inputDateFormat)):"prev"===t&&(o=o.subtract(1,"years").format(a._inputDateFormat),r=r.subtract(1,"years").format(a._inputDateFormat)),a.filterParams.start_date=o,a.filterParams.end_date=r,c(i),n(e,a)})}if("weekly"===a.dateRangeType){var u=function(t){var e=moment(a.filterParams.start_date).format("Do MMM"),n=moment(a.filterParams.end_date).format("Do MMM, YYYY");i.datepicker({format:"YYYY-MM-DD",autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}),t.html(e+" - "+n)};u(i),s.click(function(){var t=$(this).attr("data-act"),o=moment(a.filterParams.start_date),r=moment(a.filterParams.end_date);"next"===t?(o=o.add(7,"days").format(a._inputDateFormat),r=r.add(7,"days").format(a._inputDateFormat)):"prev"===t&&(o=o.subtract(7,"days").format(a._inputDateFormat),r=r.subtract(7,"days").format(a._inputDateFormat)),a.filterParams.start_date=o,a.filterParams.end_date=r,u(i),n(e,a)}),i.datepicker({format:a._inputDateFormat,autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}).on("show",function(){$(".datepicker").addClass("week-view"),$(".datepicker-days").find(".active").siblings(".day").addClass("active")}).on("changeDate",function(t){var o=getWeekRange(t.date);a.filterParams.start_date=o.firstDateOfWeek,a.filterParams.end_date=o.lastDateOfWeek,u(i),n(e,a)})}}if(void 0!==a.checkBoxes[0]){var m="",p=[],f="";$.each(a.checkBoxes,function(a,t){var e="",n="";f=t.name,t.isChecked&&(e=" checked",n=" active",p.push(t.value)),m+='<label class="btn btn-default '+n+'">',m+='<input type="checkbox" name="'+t.name+'" value="'+t.value+'" autocomplete="off" '+e+">"+t.text,m+="</label>"}),a.filterParams[f]=p;var h='<div class="mr15 DTTT_container"><div class="btn-group filter" data-act="checkbox" data-toggle="buttons">'+m+"</div></div>";t.find(".custom-toolbar").append(h),t.find("[data-act='checkbox']").click(function(){var t=$(this);setTimeout(function(){var o=[],r="";t.parent().find("input:checkbox").each(function(){r=$(this).attr("name"),$(this).is(":checked")&&o.push($(this).val())}),a.filterParams[r]=o,n(e,a)})})}if(void 0!==a.multiSelect[0]&&$.each(a.multiSelect,function(o,r){var i="",s=[];$.each(r.options,function(a,t){var e="";t.isChecked&&(e=" active",s.push(t.value)),i+='<li class="list-group-item clickable '+e+'" data-name="'+r.name+'" data-value="'+t.value+'">',i+=t.text,i+="</li>"}),i="<ul class='list-group dropdown-menu' data-act='multiselect'>"+i+"</ul>",a.filterParams[r.name]=s;var l='<div class="mr15 DTTT_container"><span class="dropdown inline-block filter-multi-select"><button class="btn btn-default dropdown-toggle " type="button" data-toggle="dropdown" aria-expanded="true">'+r.text+' <span class="caret"></span> </button>'+i+"</span></div>";t.find(".custom-toolbar").append(l),t.find("[data-name='"+r.name+"']").click(function(){var t=$(this);return t.toggleClass("active"),setTimeout(function(){var o=[],r="";t.parent().find("li").each(function(){r=$(this).attr("data-name"),$(this).hasClass("active")&&o.push($(this).attr("data-value"))}),a.filterParams[r]=o,n(e,a)}),!1})}),void 0!==a.radioButtons[0]){v="";$.each(a.radioButtons,function(t,e){var n="",o="";e.isChecked&&(n=" checked",o=" active",a.filterParams[e.name]=e.value),v+='<label class="btn btn-default '+o+'">',v+='<input type="radio" name="'+e.name+'" value="'+e.value+'" autocomplete="off" '+n+">"+e.text,v+="</label>"});var g='<div class="mr15 DTTT_container"><div class="btn-group filter" data-act="radio" data-toggle="buttons">'+v+"</div></div>";t.find(".custom-toolbar").append(g),t.find("[data-act='radio']").click(function(){var t=$(this);setTimeout(function(){t.parent().find("input:radio").each(function(){$(this).is(":checked")&&(a.filterParams[$(this).attr("name")]=$(this).val())}),n(e,a)})})}if(void 0!==a.singleDatepicker[0]&&$.each(a.singleDatepicker,function(o,r){var i=" ",s="",l="";r.options||(r.options=[]),r.options.push({value:"show-date-picker",text:AppLanugage.custom}),$.each(r.options,function(a,t){var e="";t.isSelected&&(e="active",s=t.value,l=t.text),i+='<div class="list-group-item '+e+'" data-value="'+t.value+'">'+t.text+"</div>"}),l||(l="- "+r.defaultText+" -",i='<div class="list-group-item active" data-value="">'+l+"</div>"+i),r.name&&(a.filterParams[r.name]=s);var d=function(t){a.filterParams[r.name]=t,n(e,a)},c=function(a){return a+"<i class='ml10 fa fa-caret-down text-off'></i>"},u='<div class="datepicker-custom-list list-group mb0">'+i+"</div>",m='<div class="mr15 DTTT_container"><button name="'+r.name+'" class="btn datepicker-custom-selector">'+c(l)+"</button></div>";t.find(".custom-toolbar").append(m);var p=t.find("[name='"+r.name+"']"),f=void 0!==r.options[1];p.datepicker({format:a._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom"}).on("show",function(){f&&($(".datepicker-days, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),$(".datepicker-custom-list").show(),$(".datepicker-custom-list").length||($(".datepicker").append(u),$(".datepicker .list-group-item").click(function(){$(".datepicker .list-group-item").removeClass("active"),$(this).addClass("active");var t=$(this).attr("data-value");"show-date-picker"===t?($(".datepicker-custom-list, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),$(".datepicker-days, .table-condensed").show()):($(".datepicker").hide(),moment(t,a._inputDateFormat).isValid()&&(t=moment(t,a._inputDateFormat).format(a._inputDateFormat)),p.html(c($(this).html())),d(t))})))}).on("changeDate",function(t){p.html(c(moment(t.date,a._inputDateFormat).format("Do, MMMM YYYY"))),d(moment(t.date,a._inputDateFormat).format(a._inputDateFormat))})}),void 0!==a.rangeDatepicker[0]&&$.each(a.rangeDatepicker,function(o,r){var i=r.startDate||{},s=r.endDate||{},l=!!r.showClearButton,d='<i class="fa fa-calendar"></i>',c=i.value?moment(i.value,a._inputDateFormat).format("Do, MMMM YYYY"):d,u=s.value?moment(s.value,a._inputDateFormat).format("Do, MMMM YYYY"):d;a.filterParams[i.name]=i.value,a.filterParams[s.name]=s.value;var m=function(t,o){a.filterParams[t]=o,n(e,a)},p='<div class="mr15 DTTT_container"><div class="input-daterange input-group"><button class="btn btn-default form-control" name="'+i.name+'" data-date="'+i.value+'">'+c+'</button><span class="input-group-addon">-</span><button class="btn btn-default form-control" name="'+s.name+'" data-date="'+s.value+'">'+u+"</div></div>";t.find(".custom-toolbar").append(p);var f=t.find(".input-daterange"),h=f.find("button").toArray();f.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom",inputs:h}).on("changeDate",function(t){var e=moment(t.date,a._inputDateFormat).format(a._inputDateFormat);a.filterParams[i.name]||(a.filterParams[i.name]=e),a.filterParams[s.name]||(a.filterParams[s.name]=e),m($(t.target).attr("name"),e),$(h[0]).html(moment(a.filterParams[i.name],a._inputDateFormat).format("Do, MMMM YYYY")),$(h[1]).html(moment(a.filterParams[s.name],a._inputDateFormat).format("Do, MMMM YYYY"))}).on("show",function(){l&&($(".datepicker-clear-selection").show(),$(".datepicker-clear-selection").length||($(".datepicker").append("<div class='datepicker-clear-selection p5 clickable text-center'>"+AppLanugage.clear+"</div>"),$(".datepicker .datepicker-clear-selection").click(function(){a.filterParams[i.name]="",m(s.name,""),$(h[0]).html(d),$(h[1]).html(d),$(".datepicker").hide()})))})}),void 0!==a.filterDropdown[0]){var v="";$.each(a.filterDropdown,function(o,r){var i="",s="";$.each(r.options,function(a,t){var e="";t.isSelected&&(e="selected",s=t.id),i+="<option "+e+' value="'+t.id+'">'+t.text+"</option>"}),r.name&&(a.filterParams[r.name]=s);var l='<div class="mr15 DTTT_container"><select class="'+r.class+'" name="'+r.name+'">'+i+"</select></div>";t.find(".custom-toolbar").append(l);var d=t.find("[name='"+r.name+"']");void 0!==window.Select2&&d.select2(),d.change(function(){var o=$(this),i=o.attr("name"),s=o.val();a.filterParams[i]=s,r.dependent&&r.dependent.length&&b(i,s,a.filterDropdown,t,a.filterParams),n(e,a)})})}var b=function(a,t,e,n,o){$.each(e,function(e,r){if(r.dependency&&r.dependency.length&&-1!==r.dependency.indexOf(a)){var i=n.find("select[name="+r.name+"]");if(t&&r.dataSource)$.ajax({url:r.dataSource,data:o,type:"POST",dataType:"json",success:function(a){if(a&&a.length){var t="",e="";$.each(a,function(a,n){a||(e=n.id),t+="<option value='"+n.id+"'>"+n.text+"</option>"}),i.html(t),i.select2("val",e)}}});else{var s=i.find("option:first");i.html("<option value='"+s.val()+"'>"+s.html()+"</option>"),i.select2("val",s.val()),o[r.name]=s.val()}}})}};"undefined"!=typeof TableTools&&(TableTools.DEFAULTS.sSwfPath=AppHelper.assetsDirectory+"js/datatable/TableTools/swf/copy_csv_xls_pdf.swf"),function(a){a.fn.appTable=function(t){var e=1*AppHelper.settings.displayLength;!isNaN(e)&&e||(e=10);var n={source:"",xlsColumns:[],pdfColumns:[],printColumns:[],columns:[],order:[[0,"asc"]],hideTools:!1,displayLength:e,dateRangeType:"",checkBoxes:[],multiSelect:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],stateSave:!0,stateDuration:5184e3,columnShowHideOption:!0,tableRefreshButton:!1,filterParams:{datatable:!0},onDeleteSuccess:function(){},onUndoSuccess:function(){},onInitComplete:function(){},customLanguage:{noRecordFoundText:AppLanugage.noRecordFound,searchPlaceholder:AppLanugage.search,printButtonText:AppLanugage.print,excelButtonText:AppLanugage.excel,printButtonToolTip:AppLanugage.printButtonTooltip,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},footerCallback:function(a,t,e,n,o){},rowCallback:function(a,t,e,n){},summation:"",onRelaodCallback:function(){}},o=a(this);if(!o.is("table"))return console.log("appTable: Element must have to be a table",this),!1;var r=a.extend({},n,t);if(r.reload){var i=a(this).dataTable(),s=window.InstanceCollection[a(this).selector];return s||(s=r),i.fnReloadAjax(s.filterParams),a(this).data("onRelaodCallback")&&a(this).data("onRelaodCallback")(i,s.filterParams),!1}if(r.newData){i=a(this).dataTable();if(r.dataId){var l=a(this).find("[data-post-id='"+r.dataId+"']");if(l.length)i.fnDeleteRow(l.closest("tr"));else{var d=a(this).find("[data-index-id='"+r.dataId+"']");d.length&&i.fnDeleteRow(d.closest("tr"))}}return i.fnAddRow(r.newData),!1}r._visible_columns=[],a.each(r.columns,function(a,t){!1!==t.visible&&r._visible_columns.push(a)}),r._exportable=r.xlsColumns.length+r.pdfColumns.length+r.printColumns.length,r._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,r._inputDateFormat="YYYY-MM-DD";var c={ajax:{url:(r=prepareDefaultFilters(r)).source,type:"POST",data:r.filterParams},sServerMethod:"POST",columns:r.columns,bProcessing:!0,iDisplayLength:r.displayLength,bAutoWidth:!1,bSortClasses:!1,order:r.order,stateSave:r.stateSave,fnStateLoadParams:function(a,t){t&&t.search&&(t.search.search="")},stateDuration:r.stateDuration,fnInitComplete:function(){r.onInitComplete(this)},language:{lengthMenu:"_MENU_",zeroRecords:r.customLanguage.noRecordFoundText,info:"_START_-_END_ / _TOTAL_",sInfo:"_START_-_END_ / _TOTAL_",infoFiltered:"(_MAX_)",search:"",searchPlaceholder:r.customLanguage.searchPlaceholder,sInfoEmpty:"0-0 / 0",sInfoFiltered:"(_MAX_)",sInfoPostFix:"",sInfoThousands:",",sProcessing:"<div class='table-loader'><span class='loading'></span></div>",oPaginate:{sPrevious:"<i class='fa fa-angle-double-left'></i>",sNext:"<i class='fa fa-angle-double-right'></i>"}},sDom:"",footerCallback:function(t,e,n,o,i){var s=this;if(r.summation){var l=s.api().page.info();if(!l.recordsTotal)return a(s).find("tfoot").hide(),!1;a(s).find("tfoot").show(),a.each(r.summation,function(t,e){var n=calculateDatatableTotal(s,e.column,function(a){return"currency"===e.dataType?unformatCurrency(a):"time"===e.dataType?moment.duration(a).asSeconds():"number"===e.dataType?unformatCurrency(a):a},!0);if("currency"===e.dataType?n=toCurrency(n,e.currencySymbol):"time"===e.dataType?n=secondsToTimeFormat(n):"number"===e.dataType&&(n=toCurrency(n,"none")),a(s).find("[data-current-page="+e.column+"]").html(n),l.pages>1){a(s).find("[data-section='all_pages']").show();var o=calculateDatatableTotal(s,e.column,function(a){return"currency"===e.dataType?unformatCurrency(a):"time"===e.dataType?moment.duration(a).asSeconds():"number"===e.dataType?unformatCurrency(a):a});"currency"===e.dataType?o=toCurrency(o,e.currencySymbol):"time"===e.dataType?o=secondsToTimeFormat(o):"number"===e.dataType&&(o=toCurrency(o,"none")),a(s).find("[data-all-page="+e.column+"]").html(o)}else a(s).find("[data-section='all_pages']").hide()})}r.footerCallback(t,e,n,o,i,s)},fnRowCallback:function(a,t,e,n){r.rowCallback(a,t,e,n)}};if(AppHelper.userId&&(c.stateSaveParams=function(a,t){-1===a.sInstance.indexOf("-user-ref-")&&(a.sInstance+="-user-ref-"+AppHelper.userId)},c.stateLoadCallback=function(a){-1===a.sInstance.indexOf("-user-ref-")&&(a.sInstance+="-user-ref-"+AppHelper.userId);try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(a){}}),r.hideTools||(c.sDom="<'datatable-tools'<'col-md-2 toolbar-left-top'l><'col-md-10 custom-toolbar'f>r>t<'datatable-tools clearfix'<'col-md-3'i><'col-md-9'p>>"),r._exportable){var u=[];if(r.xlsColumns.length&&u.push({sExtends:"xls",sButtonText:r.customLanguage.excelButtonText,mColumns:r.xlsColumns}),r.pdfColumns.length&&u.push({sExtends:"pdf",mColumns:r.pdfColumns}),r.printColumns.length){r._hiddenColumns=function(a,t){return a.filter(function(a){return t.indexOf(a)<0})}(r._visible_columns,r.printColumns),u.push({sExtends:"print",sButtonText:r.customLanguage.printButtonText,sToolTip:r.customLanguage.printButtonToolTip,sInfo:"",fnClick:function(t,e){for(var n in r._hiddenColumns)m.fnSetColumnVis(r._hiddenColumns[n],!1);a("html").addClass("print-peview"),a(".scrollable-page").addClass("print-peview"),this.fnPrint(!0,e),a(window).keydown(function(t){if(27===t.which){for(var e in r._hiddenColumns)m.fnSetColumnVis(r._hiddenColumns[e],!0);a(".print-peview").removeClass("print-peview"),setPageScrollable(),a(".dataTables_processing").hide()}})}})}r.hideTools||(c.sDom="<'datatable-tools'<'col-md-2 toolbar-left-top'l><'col-md-10 custom-toolbar'f<'datatable-export'T>>r>t<'datatable-tools clearfix'<'col-md-3'i><'col-md-9'p>>"),c.oTableTools={aButtons:u}}var m=o.dataTable(c),p=o.closest(".dataTables_wrapper");if(p.find(".DTTT_button_print").tooltip({placement:"bottom",container:"body"}),p.find("select").select2({minimumResultsForSearch:-1}),r.columnShowHideOption){var f=o.attr("id");i=o.DataTable();p.find(".toolbar-left-top").append('<div class="DTTT_container pull-left"><button class="btn btn-default column-show-hide-popover ml15" data-container="body" data-toggle="popover" data-placement="bottom"><i class="fa fa-eye-slash"></button></div>'),p.find(".column-show-hide-popover").popover({html:!0,content:function(){var t="";return a.each(r.columns,function(a,e){if(!1!==e.visible){var n="";i.column(a).visible()||(n="active"),t+="<li class='"+n+" list-group-item clickable toggle-table-column' data-column='"+a+"'>"+e.title+"</li>"}}),"<ul class='list-group' data-table='"+f+"'>"+t+"</ul>"}}),p.find(".column-show-hide-popover").on("shown.bs.popover",function(){a(".toggle-table-column").on("click",function(){var t=a(this).closest(".list-group").attr("data-table"),e=a("#"+t).DataTable().column(a(this).attr("data-column"));e&&(e.visible(!e.visible()),a(this).toggleClass("active"))})})}if(r.tableRefreshButton){p.find(".toolbar-left-top").append('<div class="DTTT_container pull-left "><button class="btn btn-default at-table-refresh-button ml15"><i class="fa fa-refresh"></i></button></div>'),p.find(".at-table-refresh-button").on("click",function(){o.appTable({reload:!0,filterParams:r.filterParams})})}a("body").hasClass("destroy-popover")||(a("body").addClass("destroy-popover"),a(".destroy-popover").on("click",function(t){if("popover"!==a(t.target).closest("button").attr("data-toggle")&&!a(t.target).closest(".popover").length&&!a(t.target).hasClass("editable")){var e=a(".popover.in").attr("id");a("[aria-describedby="+e+"]").trigger("click")}})),o.data("onRelaodCallback",r.onRelaodCallback),buildFilterDom(r,p,o);var h=function(t){a('<a class="undo-delete" href="javascript:;"><strong>Undo</strong></a>').insertAfter(a(t.alertSelector).find(".app-alert-message")),a(t.alertSelector).find(".undo-delete").bind("click",function(){a(t.alertSelector).remove(),appLoader.show(),a.ajax({url:t.url,type:"POST",dataType:"json",data:{id:t.id,undo:!0},success:function(a){appLoader.hide(),a.success&&(o.appTable({newData:a.data}),r.onUndoSuccess(a))}})})},g=function(t){appLoader.show();var e=a(t.currentTarget);t.data&&t.data.target&&(e=t.data.target);var n=e.attr("data-action-url"),i=e.attr("data-id"),s=e.attr("data-undo");a.ajax({url:n,type:"POST",dataType:"json",data:{id:i},success:function(a){if(a.success){var t=e.closest("tr"),l=o.DataTable();m.fnDeleteRow(l.row(t).index());var d=appAlert.warning(a.message,{duration:2e4});r.onDeleteSuccess(a),"0"!==s&&h({alertSelector:d,url:n,id:i})}else appAlert.error(a.message);appLoader.hide()}})};window.InstanceCollection=window.InstanceCollection||{},window.InstanceCollection[a(this).selector]=r,a("body").find(o).on("click","[data-action=delete]",g),a("body").find(o).on("click","[data-action=delete-confirmation]",function(t){var e=a("#confirmDeleteButton"),n=a(t.currentTarget);a(this).each(function(){a.each(this.attributes,function(){this.specified&&this.name.match("^data-")&&e.attr(this.name,this.value)})}),n.attr("data-undo","0"),e.unbind("click"),e.on("click",{target:n},g),a("#confirmationModal").modal("show")}),a.fn.dataTableExt.oApi.getSettings=function(a){return a},a.fn.dataTableExt.oApi.fnReloadAjax=function(t,e){this.fnClearTable(this),this.oApi._fnProcessingDisplay(t,!0);var n=this;a.ajax({url:t.ajax.url,type:"POST",dataType:"json",data:e,success:function(a){for(var e=0;e<a.data.length;e++)n.oApi._fnAddData(t,a.data[e]);t.aiDisplay=t.aiDisplayMaster.slice(),n.fnDraw(n),n.oApi._fnProcessingDisplay(t,!1)}})},a.fn.dataTableExt.oApi.fnAddRow=function(a,t){this.oApi._fnAddData(a,t),this.fnDraw(this)}}}(jQuery),function(a){a(["jquery"],function(a){return function(){function t(a){var t="info";return"error"===this._settings.alertType?t="danger":"success"===this._settings.alertType?t="success":"warning"===this._settings.alertType&&(t="warning"),this._settings.animate&&(t+=" animate"),'<div id="'+this._settings.alertId+'" class="app-alert alert alert-'+t+' alert-dismissible " role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="app-alert-message">'+a+'</div><div class="progress"><div class="progress-bar progress-bar-'+t+' hide" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div>'}function e(t){if(!t)var t={};return t.alertId="app-alert-"+n(),this._settings=a.extend({},s.options,t)}function n(){for(var a="",t="abcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}function o(){this._settings.clearAll&&a("[role='alert']").remove()}function r(e){o(),a(this._settings.container).length?(this._settings.animate&&setTimeout(function(){a(".app-alert").animate({opacity:1,right:"40px"},500,function(){a(".app-alert").animate({right:"15px"},300)})},20),a(this._settings.container).prepend(t(e)),i()):console.log("appAlert: container must be an html selector!")}function i(){if(this._settings.duration&&this._settings.showProgressBar){var t="#"+this._settings.alertId,e=a(t).find(".progress-bar");e.removeClass("hide").width(0);var n="width "+this._settings.duration+"ms ease";e.css({WebkitTransition:n,MozTransition:n,MsTransition:n,OTransition:n,transition:n}),setTimeout(function(){a(t).length>0&&a(t).remove()},this._settings.duration)}}var s={info:function(a,t){return this._settings=e(t),this._settings.alertType="info",r(a),"#"+this._settings.alertId},success:function(a,t){return this._settings=e(t),this._settings.alertType="success",r(a),"#"+this._settings.alertId},warning:function(a,t){return this._settings=e(t),this._settings.alertType="warning",r(a),"#"+this._settings.alertId},error:function(a,t){return this._settings=e(t),this._settings.alertType="error",r(a),"#"+this._settings.alertId},options:{container:"body",duration:0,showProgressBar:!0,clearAll:!0,animate:!0}};return s}()})}(function(a,t){window.appAlert=t(window.jQuery)}),function(a){a(["jquery"],function(a){return function(){function t(t){if(!t)var t={};return this._settings=a.extend({},e.options,t)}var e={show:function(e){var n=a("#app-loader");if(this._settings=t(e),!n.length){var o=a(this._settings.container);o.length?o.append('<div id="app-loader" class="app-loader" style="z-index:'+this._settings.zIndex+";"+this._settings.css+'"><div class="loading"></div></div>'):console.log("appLoader: container must be an html selector!")}},hide:function(){var t=a("#app-loader");t.length&&t.remove()},options:{container:"body",zIndex:"auto",css:""}};return e}()})}(function(a,t){window.appLoader=t(window.jQuery)}),function(a){a(["jquery"],function(a){return function(){function t(a){27===a.keyCode&&e()}function e(){a(".app-modal").remove(),a(document).unbind("keyup",t),"undefined"!=typeof appModalXhr&&appModalXhr.abort()}function n(t){return t||(t={}),this._settings=a.extend({},appLoader.options,t)}function o(n){var o="<div class='app-modal-sidebar hidden-xs'>                                        <div class='app-modal-close'><span>&times;</span></div>                                        <div class='app-moadl-sidebar-scrollbar'>                                            <div class='app-modal-sidebar-area'>                                            </div>                                        </div>                                    </div>",i="<i class='fa fa-expand expand hidden-xs'></i>";!1===n.sidebar&&(o="",i="<div class='app-modal-close app-modal-fixed-close-button'><span>&times;</span></div>");var s="<div class='app-modal loading'>                                <i class='fa fa-compress compress'></i>                                <div class='app-modal-body'>                                    <div class='app-modal-content'>"+i+"<div class='hide app-modal-close'><span>&times;</span></div>                                        <div class='app-modal-content-area'>                                        </div>                                    </div>"+o+"</div>                            </div>";e(),a("body").prepend(s),a.fn.mCustomScrollbar&&a(".app-moadl-sidebar-scrollbar").mCustomScrollbar({setHeight:a(window).height()-60,theme:"minimal-dark",autoExpandScrollbar:!0}),a(".expand").click(function(){a(".app-modal").addClass("full-content")}),a(".compress").click(function(){a(".app-modal").removeClass("full-content")}),a(".app-modal-close").click(function(){e()}),a(document).bind("keyup",t),appLoader.show({container:".app-modal",css:"top:35%; right:48%;"}),appModalXhr=a.ajax({url:n.url||"",data:{},cache:!1,type:"POST",success:function(t){var e=a(t);a(".app-modal-content-area").html(e.find(".app-modal-content").html()),a(".app-modal-sidebar-area").html(e.find(".app-modal-sidebar").html()),e.remove(),a(".app-modal").removeClass("loading"),appLoader.hide()},statusCode:{404:function(){r.destroy(),appAlert.error("404: Page not found.")}},error:function(){r.destroy(),appAlert.error("500: Internal Server Error.")}})}var r={init:function(a){this._settings=n(a),o(this._settings)},destroy:e,options:{url:"",css:"",sidebar:!0}};return r}()})}(function(a,t){window.appContentModal=t(window.jQuery)}),function(a){a.fn.appDateRange=function(t){var e={dateRangeType:"yearly",filterParams:{},onChange:function(a){},onInit:function(a){}},n=a.extend({},e,t);n._inputDateFormat="YYYY-MM-DD",this.each(function(){var t=a(this);t.append('<div class="ml15"><button data-act="prev" class="btn btn-default date-range-selector"><i class="fa fa-chevron-left"></i></button><button data-act="datepicker" class="btn btn-default" style="margin: -1px"></button><button data-act="next"  class="btn btn-default date-range-selector"><i class="fa fa-chevron-right"></i></button></div>');var e=t.find("[data-act='datepicker']"),o=t.find(".date-range-selector");if("yearly"===n.dateRangeType){var r=function(a){a.html(moment(n.filterParams.start_date).format("YYYY"))};r(e),e.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom"}).on("changeDate",function(a){var t=moment(a.date).format(n._inputDateFormat),o=moment(t).format("YYYY");n.filterParams.start_date=o+"-01-01",n.filterParams.end_date=o+"-12-31",n.filterParams.year=o,r(e),n.onChange(n.filterParams)});var i=moment().format("YYYY");n.filterParams.start_date=i+"-01-01",n.filterParams.end_date=i+"-12-31",n.filterParams.year=i,n.onInit(n.filterParams),o.click(function(){var t=a(this).attr("data-act"),o=moment(n.filterParams.start_date),i=moment(n.filterParams.end_date);"next"===t?(o=o.add(1,"years").format(n._inputDateFormat),i=i.add(1,"years").format(n._inputDateFormat)):"prev"===t&&(o=o.subtract(1,"years").format(n._inputDateFormat),i=i.subtract(1,"years").format(n._inputDateFormat)),n.filterParams.start_date=o,n.filterParams.end_date=i,n.filterParams.year=moment(o).format("YYYY"),r(e),n.onChange(n.filterParams)})}})}}(jQuery);var loadFilterView=function(a){a.source&&a.targetSelector&&$.ajax({url:a.source,data:a.filterParams,cache:!1,type:"POST",success:function(t){$(a.targetSelector).html(t),appLoader.hide()},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}})};!function(a){a.fn.appFilters=function(t){appLoader.show();var e={source:"",targetSelector:"",reloadSelector:"",dateRangeType:"",checkBoxes:[],multiSelect:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],filterParams:{customFilter:!0},search:{show:!1},customLanguage:{searchPlaceholder:AppLanugage.search,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},beforeRelaodCallback:function(){},afterRelaodCallback:function(){},onInitComplete:function(){}},n=a(this),o=n;o.append("<div class='custom-toolbar'></div>");var r=a.extend({},e,t);if(r.reload){var i=a(this),s=window.InstanceCollection[i.selector];return i.data("beforeRelaodCallback")&&i.data("beforeRelaodCallback")(i,s.filterParams),loadFilterView(s),i.data("afterRelaodCallback")&&i.data("afterRelaodCallback")(i,s.filterParams),!1}r._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,r._inputDateFormat="YYYY-MM-DD",r=prepareDefaultFilters(r),buildFilterDom(r,o,n),window.InstanceCollection=window.InstanceCollection||{},window.InstanceCollection[n.selector]=r,r.onInitComplete&&r.onInitComplete(n,r.filterParams),loadFilterView(r),n.data("beforeRelaodCallback",r.beforeRelaodCallback),n.data("afterRelaodCallback",r.afterRelaodCallback)}}(jQuery),replaceAllString=function(a,t,e){return a.split(t).join(e)},toCurrency=function(a,t){a=parseFloat(a).toFixed(2),t||(t=AppHelper.settings.currencySymbol);var e=a.replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return" "===AppHelper.settings.thousandSeparator&&(e=e.replace(","," ")),","===AppHelper.settings.decimalSeparator&&(e=replaceAllString(e,".","_"),e=replaceAllString(e,",","."),e=replaceAllString(e,"_",",")),"none"===t&&(t=""),"right"===AppHelper.settings.currencyPosition?e+""+t:t+""+e},calculateDatatableTotal=function(a,t,e,n){var o=a.api(),r={};return n&&(r={page:"current"}),o.column(t,r).data().reduce(function(a,t){return e?a+e(t):a+t},0)},unformatCurrency=function(a){return(a=a.toString())&&(0!=(a=a.replace(/[^0-9.,]/g,"")).indexOf(".")&&0!=a.indexOf(",")||(a=a.slice(1)),","===AppHelper.settings.decimalSeparator?(a=replaceAllString(a,".",""),a=replaceAllString(a,",",".")):a=replaceAllString(a,",",""),a*=1),a||0},secondsToTimeFormat=function(a){var t=parseInt(a,10),e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),o=t-3600*e-60*n;return e<10&&(e="0"+e),n<10&&(n="0"+n),o<10&&(o="0"+o),e+":"+n+":"+o},clearAppTableState=function(a){a&&setTimeout(function(){a.api().state.clear()},200)},showHideAppTableColumn=function(a,t,e){a.fnSetColumnVis(t,!!e)};